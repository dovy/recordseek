<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span>
<h3 xmlns="http://www.w3.org/1999/html">Attach a Source
    <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events
        <span class="badge">{{tagCount}}</span></a> <br/>
    <small class="hide">Before we add {name} to your tree, letâ€™s create a source (similar to a bookmark) for future reference.</small>
    <!--<a class="btn btn-info pull-right btn-sm ng-hide" ng-click="goUpload()">Upload Memory</a>-->
</h3>

<div class="row container-fluid">
    <form ng-submit="goNext()">

        <div class="form-group input-group-sm">
            <label>Source Title </label>
            <input type="text" class="form-control" ng-model="data.title" placeholder="Enter a title for this source"
                    required>
        </div>
        <div class="form-group input-group-sm">
            <label>Source
                <small>(URL)</small>
            </label> <input type="text" class="form-control" ng-model="data.url" placeholder="Enter a URL"
                required>
        </div>
        <div class="form-group input-group-sm">
            <label>Where the Record Is Found
                <small>(Citation)</small>
            </label>

            <textarea class="form-control" ng-model="data.citation" rows="3" required></textarea>
        </div>
        <div class="form-group input-group-sm" show-errors>
            <label>Describe the Record
                <small>(Notes)</small>
            </label> <textarea class="form-control" ng-model="data.notes" rows="3"></textarea>
        </div>
        <div ng-class="getSourceBoxes ? 'form-group input-group-sm has-warning' : 'form-group input-group-sm'" class="" title="Loading data..."><label>Source Box <small>(Folder)</small></label>
            <select class="form-control" ng-model="data.sourcebox" popover-placement="top"
                    popover="If in orange, your SourceBox folders are being fetched. Please wait if you want a specific folder."
                    popover-trigger="mouseenter">
                <option ng-repeat="(key, value) in sourcebox" ng-selected="{{key == 'RecordSeek'}}" value="{{value}}">{{key}}</option>
            </select>
        </div>
        <div class="text-right">
            <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i
                    class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a>
            <span class="hidden-xs"><a ng-click="createNow()" class="btn btn-xs btn-default" popover-placement="left"
                    popover="Save the source to your SourceBox, without attaching to a profile."
                    popover-trigger="mouseenter">Save Now, Attach Later</a><br class="visible-xs"/>
            &nbsp;&nbsp;</span>
            <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i
                    class="glyphicon glyphicon-arrow-right"></i></button>
            <span class="visible-xs"><br/><a ng-click="createNow()" class="btn btn-xs btn-default" popover-placement="left"
                    popover="Save the source to your SourceBox, without attaching to a profile."
                    popover-trigger="mouseenter">Save Now, Attach Later</a></span>
        </div>
    </form>
</div>


<script type="text/ng-template" id="tagTemplate.html">
    <div style="width:240px;">
        <div class="text-center"><strong>Select the events this source <br/>should be attached to.</strong></div>

        <div style="margin: 5px 0 10px 0;">
            <div class="row">
                <div class="col-sm-6">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.name"> Name </label>
                </div>
                <div class="col-sm-6">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.gender"> Gender </label>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.birth"> Birth </label>
                </div>
                <div class="col-sm-6">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.christening"> Christening
                    </label>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.death"> Death </label>
                </div>
                <div class="col-sm-6">
                    <label class="checkbox-inline">
                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.burial"> Burial </label>
                </div>
            </div>


        </div>
        <a class="btn btn-info btn-xs center-block" ng-click="myPopover.close()">Close</a>
    </div>
</script>