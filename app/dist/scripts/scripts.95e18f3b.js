"use strict";var RecordSeek=RecordSeek||{};RecordSeek.helpers={isNotString:function(a){return"string"!=typeof a}},"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),angular.module("recordseekApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).run(["$rootScope","$location","$cookies","$window","fsAPI","$http","$log","$timeout",function(a,b,c,d,e,f,g,h){f.defaults.useXDomain=!0,delete f.defaults.headers.common["X-Requested-With"],window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),document.location.origin||(document.location.origin=window.location.origin),a.helpers=RecordSeek.helpers,a.attachMsg="Source created by http://RecordSeek.com",a.debug="production"==e.settings.environment||"beta"==e.settings.environment?!1:!0,a.debug||(ga("create","UA-16096334-10"),ga("send","pageview")),a.service="",a.expires=15,a.log=function(b){a.debug&&g.debug(b)},a.setCookie=function(b,d){var e=new Date,f=new Date(e);f.setMinutes(e.getMinutes()+a.expires),c.put(b,d,{expires:f})},a.logout=function(){a.log(e),"FamilySearch"===a.service&&(e.helpers.eraseAccessToken(!0),a.user="",b.path("/"))},a.safeApply=function(){var a=this.$root.$$phase;"$apply"==a||"$digest"==a||this.$apply()},a.track=function(b){a.debug?a.log(b):ga("send","event",b)},a.actionTaken=function(c){var e=c.currentTarget.attributes;e["data-tracking"]&&a.track({eventCategory:"App",eventAction:e["data-tracking"].value}),!e["data-tracking"]||"FamilySearch"!==e["data-tracking"].value&&"Ancestry"!==e["data-tracking"].value||a.setCookie("recordseek-last-service",e["data-tracking"].value),e.target&&"_blank"===e.target.value?d.open(e["data-href"].value):b.path(e["data-href"].value)};var i=document.URL.split("#/"),j=e.helpers.decodeQueryString(i[0]);if(j.tags){var k=j.tags.split(",");j.tags={},k.map(function(a){j.tags[a.toLowerCase()]=!0})}else j.tags={};if((j.birthPlace||j.birthDate)&&(j.tags.birth=!0),(j.deathPlace||j.deathDate)&&(j.tags.death=!0),(j.givenName||j.surname)&&(j.tags.name=!0),j.gender&&(j.tags.gender=!0),a.log(j),1==j.r){delete j.r;var l=c.get("recordseek-auth");""!=l&&(j=angular.fromJson(l))}if(b.$$absUrl.indexOf("?_")>-1&&-1===b.$$absUrl.indexOf("/#"),j){var m=j,n={},o=["h1"];for(var p in m){var q=m[p],r=typeof q;if(null!==q&&"string"===r&&m.hasOwnProperty(p)){if(-1!==p.indexOf(".")){var s=p.split(".");m[s[0]]=m[s[0]]?m[s[0]]:[],m[s[0]][s[1]]=m[p].replace(/(\r\n|\n|\r)/gm,"").replace(/ +(?= )/g,"").trim()}else m[p]=m[p].replace(/(\r\n|\n|\r)/gm,"").replace(/ +(?= )/g,"").trim();-1===o.indexOf(p)&&""!=m[p]&&(n[p]=m[p])}}angular.equals({},n)||(a.log(n),a.personData=n);var t=new Date;if(Date.prototype.yyyymmdd=function(){var a=this.getFullYear().toString(),b=(this.getMonth()+1).toString(),c=this.getDate().toString();return a+"/"+(b[1]?b:"0"+b[0])+"/"+(c[1]?c:"0"+c[0])},m.time=t.yyyymmdd(),m.url&&m.url.indexOf("billiongraves.com")>-1){var u=m.url.split("#");m.url=u[0]}a.data=m,a.data.sourceFormat||(a.data.sourceFormat="MLA");var v="/Date("+a.data._+")/",w=new Date(parseFloat(v.substr(6))),x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=w.getFullYear(),z=x[w.getMonth()],t=w.getDate();if(a.data.time=t+" "+z+". "+y,a.data.url&&""!==a.data.url){a.data.url.indexOf("ancestry")>-1&&(a.data.url=a.data.url.replace("ancestryinstitution.com","ancestry.com").replace("ancestrylibrary.com","ancestry.com").replace("ancestrylibrary.proquest.com","ancestry.com"));var A=["pid","h","db","indiv","treeid"];if(a.data.url&&a.data.url.indexOf("ancestry.com")>-1){var B=e.helpers.decodeQueryString(a.data.url),C={};angular.forEach(A,function(a){B[a]&&(this[a]=B[a])},C)}if(a.data.url&&a.data.url.indexOf("billiongraves.com")>-1){var D=a.data.url.split("/");a.data.citation='"Billion Graves Record," BillionGraves ('+a.data.url+" accessed "+a.data.time+"), "+a.data.title+" Record #"+D[D.length-1]+". Citing BillionGraves, Headstones, BillionGraves.com."}else a.data.citation||(a.data.citation='"'+a.data.title+'." '+a.data.title+". N.p., n.d. Web. "+a.data.time+". <"+a.data.url+">.");if(a.data.url){var E=a.data.url.split("//"),F=E[1];F&&(E=F.replace("www.","").split("/")[0],a.data.domain=E.charAt(0).toUpperCase()+E.slice(1),console.log(a.data.domain),a.track({eventCategory:"Domain",eventAction:a.data.domain.toLowerCase().replace("www.","")}))}}a.data.notes&&(a.data.notes=a.data.notes.trim().replace("#/fs-source","")),a.data.notes&&""!==a.data.notes.trim()?a.data.notes+="\n\n":a.data.notes="",-1===a.data.notes.indexOf(a.attachMsg)&&(a.data.notes+=a.attachMsg),a.data.title||(a.data.title=""),a.data.citation||(a.data.citation="")}else"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin&&!a.data;a.$on("$routeChangeSuccess",function(){"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin&&a.data&&"/about"!==b.$$path&&"/support"!==b.$$path&&"/expired"!==b.$$path&&a.data}),a.data||(a.data={}),a.data.addPerson||(a.data.addPerson={}),a.auth={};var G="";if(a.resetSearch=function(b){a.data.search&&a.data.search.advanced&&(G=a.data.search.advanced);var c={givenName:"",givenNameExact:"",surname:"",surnameExact:"",gender:"",eventType:"",eventDate:"",eventDateFrom:"",eventDateTo:"",eventPlace:"",eventPlaceExact:"",spouseGivenName:"",spouseGivenNameExact:"",spouseSurname:"",spouseSurnameExact:"",motherGivenName:"",motherGivenNameExact:"",motherSurname:"",motherSurnameExact:"",fatherGivenName:"",fatherGivenNameExact:"",fatherSurname:"",fatherSurnameExact:"",pid:"",status:""};return""!==G?c.advanced=G:G=!1,b?c:void(a.data.search=c)},a.tagCounting=function(){var b=0;angular.forEach(a.data.tags,function(a,c){a===!0&&b++},b),0===b&&(b=""),a.tagCount=b},a.tagCounting(),a.closeTags=function(){h(function(){angular.element("#sourceTags").trigger("click")},0)},!a.data.search&&(a.resetSearch(),a.data.search.advanced=!1,a.personData&&!angular.equals({},a.personData)))for(var p in a.personData)a.personData[p],-1!==a.data.search.hasOwnProperty(p)&&(a.data.search[p]=a.personData[p])}]).constant("_",_).config(["$provide","$routeProvider",function(a,b){a.decorator("$exceptionHandler",["$delegate","$window",function(a,b){return function(c,d){b.trackJs&&b.trackJs.track(c),a(c,d)}}]),b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/loading",{templateUrl:"views/loading.html",controller:"LoadingCtrl"}).when("/support",{templateUrl:"views/support.html",controller:"SupportCtrl"}).when("/fs-source",{templateUrl:"views/fs-source.html",controller:"FsSourceCtrl"}).when("/fs-upload",{templateUrl:"views/fs-upload.html",controller:"FsUploadCtrl"}).when("/fs-search",{templateUrl:"views/fs-search.html",controller:"FsSearchCtrl"}).when("/fs-addperson",{templateUrl:"views/fs-addperson.html",controller:"FsAddpersonCtrl"}).when("/fs-attach",{templateUrl:"views/fs-attach.html",controller:"FsAttachCtrl"}).when("/fs-addattach",{templateUrl:"views/fs-addattach.html",controller:"FsAddAttachCtrl"}).when("/fs-complete",{templateUrl:"views/fs-complete.html",controller:"FsCompleteCtrl"}).when("/a-source",{templateUrl:"views/a-source.html",controller:"ASourceCtrl"}).when("/fs-results",{templateUrl:"views/fs-results.html",controller:"FsResultsCtrl"}).when("/fs-create",{templateUrl:"views/fs-create.html",controller:"FsCreateCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("recordseekApp").controller("MainCtrl",["$cookies","$rootScope","$scope","$timeout",function(a,b,c,d){b.service="";var e=a.get("recordseek-last-service");e&&d(function(){angular.element("#load"+e).trigger("click")},0)}]);var init=function(){var a=800,b=675;window.resizeTo(a,b),window.moveTo(screen.width-a,(screen.height-b)/2)};angular.module("recordseekApp").controller("LoadingCtrl",["$rootScope",function(a){a.service=""}]),angular.module("recordseekApp").controller("AboutCtrl",["$rootScope",function(a){a.service=""}]),angular.module("recordseekApp").controller("SupportCtrl",["$rootScope",function(a){a.service=""}]),angular.module("recordseekApp").controller("FsSourceCtrl",["$cookies","$rootScope","$location","$scope","fsAPI",function(a,b,c,d,e,f){if(b.service="FamilySearch",d.fsLogout=function(){e.completeLogout()},e.displayUser(d),b.data.search.newPerson&&delete b.data.search.newPerson,d.origSource=b.data.citation,d.myPopover={isOpen:!1,templateUrl:"tagTemplate.html",toggle:function(){1!=d.myPopover.isOpen?d.myPopover.isOpen=!1:d.myPopover.isOpen=!0},close:function(){d.myPopover.isOpen=!1}},d.goNext=function(){c.path("/fs-search"),d.origSource!==b.data.citation&&b.track({eventCategory:"FamilySearch",eventAction:"Citation",eventLabel:"Modified"}),b.log(b.data)},d.goBack=function(){a.remove("recordseek-last-service"),b.service="",c.path("/")},d.goUpload=function(){c.path("/fs-upload")},d.createNow=function(){b.track({eventCategory:"FamilySearch",eventAction:"Create",eventLabel:"Now"}),delete b.data.attach,b.data.complete="noAttachment",c.path("/fs-create"),b.safeApply()},b.personData){var g=b.personData;g.title&&delete g.title,g.notes&&delete g.notes,g.citation&&delete g.citation,g.url&&delete g.url,g.sourceFormat&&delete g.sourceFormat,g.time&&delete g.time,g.domain&&delete g.domain,g.tags&&delete g.tags,g._&&delete g._,!g||angular.equals({},g)||b.skipSource||(b.skipSource=1,b.log(g),d.goNext()),b.log(b.personData)}}]),angular.module("recordseekApp").controller("FsUploadCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("recordseekApp").controller("FsSearchCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){function f(a,b){for(var c=Math.ceil(a.length/b),d=new Array(c),e=0,f=0;c>e;++e,f+=b)d[e]=a.substr(f,b);return d}a.service="FamilySearch",c.pid_check=function(){a.data.search.pid=a.data.search.pid.trim().toUpperCase().replace(/[^A-Za-z0-9\-]/g,""),a.data.search.pid.length>=7&&(a.data.search.pid=a.data.search.pid.split("-").join(""),a.data.search.pid=f(a.data.search.pid,4).join("-"))},c.pid_state=function(){return a.data.search.pid.length>0&&a.data.search.pid.length<8?"has-warning":a.data.search.pid.length>=8?"has-success":void 0},d.displayUser(c),a.data.search.advanced?c.advancedButtonText="Basic":c.advancedButtonText="Advanced",c.emptyData=a.resetSearch(!0),c.getLocation=e.getLocation,c.removeEmpty=e.removeEmptyProperties,c.advancedSearch=function(){a.data.search.advanced?(a.data.search.advanced=!1,c.advancedButtonText="Advanced"):(c.advancedButtonText="Basic",a.data.search.advanced=!0)},c.validData=function(){return a.data.search.pid.length>0?a.data.search.pid.length<8?!0:!1:angular.equals(c.emptyData,a.data.search)?!0:!1},c.goNext=function(){angular.equals(c.emptyData,a.data.search)||b.path("/fs-results")},c.goBack=function(){b.path("/fs-source")}}]),angular.module("recordseekApp").controller("FsAddpersonCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){a.service="FamilySearch",d.displayUser(c),a.data.search=e.cleanSearch(a.data.search),(a.data.search.motherGivenName||a.data.search.motherSurname||a.data.search.fatherGivenName||a.data.search.fatherSurname||a.data.search.spouseGivenName||a.data.search.spouseSurname)&&(c.isCollapsed=!0),c.langTemplates=e.langTemplates(),c.status={isopen:!1},c.toggleDropdown=function(a){a.preventDefault(),a.stopPropagation(),c.status.isopen=!c.status.isopen},c.changeTemplate=function(b){a.data.search.langTemplate=b,"Cyrillic"==b?(c.title1="Cyrillic",c.title2="Roman"):"Chinese"==b?(c.title1="Hanzi",c.title2="Roman"):"Japanese"==b?(c.title1="Kanji",c.title2="Kana",c.title3="Roman"):"Khmer"==b?(c.title1="Khmer",c.title2="Roman"):"Korean"==b?(c.title1="Hangul",c.title2="Hanja",c.title3="Roman"):"Mongolian"==b?(c.title1="Mongolian",c.title2="Roman"):"Thai"==b?(c.title1="Thai",c.title2="Roman"):"Vietnamese"==b&&(c.title1="Vietnamese",c.title2="Roman")},c.getLocation=e.getLocation,c.removeEmpty=e.removeEmptyProperties,c.getDate=e.getDate,c.goNext=function(){a.data.search.newPerson=1,b.path("/fs-addattach")},c.goBack=function(){b.path("/fs-search")}}]),angular.module("recordseekApp").controller("FsAddAttachCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){a.service="FamilySearch",d.displayUser(c),a.log(a.data.search),a.data.search=e.cleanSearch(a.data.search),a.toCreate=[];var f="",g={};c.myPopover={isOpen:!1,templateUrl:"tagTemplate.html",toggle:function(){1!=c.myPopover.isOpen?c.myPopover.isOpen=!1:c.myPopover.isOpen=!0},close:function(){c.myPopover.isOpen=!1}},a.data.search.langTemplate&&(g.names={},"Cyrillic"==a.data.search.langTemplate?(g.names.cyrillic={},f={title:"Name",sub:"Cyrillic",value:""},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.cyrillic.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.cyrillic.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.cyrillic.$surname=a.data.search.surname1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1,g.names.cyrillic.$suffix=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f)):"Chinese"==a.data.search.langTemplate?(f={title:"Name",sub:"Hanzi",value:""},g.names.hanzi={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.hanzi.$prefix=a.data.search.prefix1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.hanzi.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.hanzi.$givenName=a.data.search.givenName1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",a.newPerson.names.roman.$prefix=a.data.search.prefix2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName1),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f)):"Japanese"==a.data.search.langTemplate?(f={title:"Name",sub:"Kanji",value:""},g.names.kanji={},a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.kanji.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.kanji.$givenName=a.data.search.givenName1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Kana",value:""},g.names.kana={},a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.kana.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.kana.$givenName=a.data.search.givenName2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.surname3&&(f.value+=a.data.search.surname3+" ",g.names.roman.$surname=a.data.search.surname3),a.data.search.givenName3&&(f.value+=a.data.search.givenName3+" ",g.names.roman.$givenName=a.data.search.givenName3),a.data.search.suffix3&&(f.value+=a.data.search.suffix3),""!==f.value&&a.toCreate.push(f)):"Khmer"==a.data.search.langTemplate?(f={title:"Name",sub:"Khmer",value:""},g.names.khmer={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",a.newPerson.names.khmer.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.khmer.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.khmer.$surname=a.data.search.surname1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(g.names.roman.$prefix=a.data.search.prefix2,f.value+=a.data.search.prefix2+" "),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f)):"Korean"==a.data.search.langTemplate?(f={title:"Name",sub:"Hangul",value:""},g.names.hangul={},a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.hangul.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.hangul.$givenName=a.data.search.givenName1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Hanja",value:""},g.names.hanja={},a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.hanji.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.hanja.$givenName=a.data.search.givenName2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.surname3&&(f.value+=a.data.search.surname3+" ",g.names.roman.$surname=a.data.search.surname3),a.data.search.givenName3&&(f.value+=a.data.search.givenName3+" ",g.names.roman.$givenName=a.data.search.givenName3),a.data.search.suffix3&&(f.value+=a.data.search.suffix3),""!==f.value&&a.toCreate.push(f)):"Mongolian"==a.data.search.langTemplate?(f={title:"Name",sub:"Mongolian",value:""},g.names.mongolian={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.mongolian.$prefix=a.data.search.prefix1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.mongolian.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.mongolian.$givenName=a.data.search.givenName1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),""!==f.value&&a.toCreate.push(f)):"Thai"==a.data.search.langTemplate?(f={title:"Name",sub:"Thai",value:""},g.names.thai={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.thai.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.thai.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.thai.$surname=a.data.search.surname1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),""!==f.value&&a.toCreate.push(f)):"Vietnamese"==a.data.search.langTemplate?(f={title:"Name",sub:"Vietnamese",value:""},g.names.vietnamese={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.vietnamese.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.vietnamese.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.vietnamese.$surname=a.data.search.surname1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName1),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),""!==f.value&&a.toCreate.push(f)):(f={title:"Name",value:""},g.names.standard={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.standard.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.standard.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.standard.$surname=a.data.search.surname1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),a.toCreate.push(f))),a.data.search.gender&&(a.toCreate.push({title:"Gender",value:a.data.search.gender}),g.gender="http://gedcomx.org/"+a.data.search.gender),g.events={},(a.data.search.birthDate||a.data.search.birthPlace)&&(f={title:"Birth",value:""},g.events.birth={type:"http://gedcomx.org/Birth"},a.data.search.birthDate&&(a.data.search.birthDate.normalized?(f.value+=a.data.search.birthDate.normalized,g.events.birth.$date=a.data.search.birthDate.normalized):(f.value+=a.data.search.birthDate,g.events.birth.$date=a.data.search.birthDate)),a.data.search.birthPlace&&(a.data.search.birthDate&&(f.value+="<br />"),f.value+=a.data.search.birthPlace,g.events.birth.$place=a.data.search.birthPlace),a.toCreate.push(f)),(a.data.search.deathDate||a.data.search.deathPlace)&&"Living"!=a.data.search.status?(f={title:"Death",value:""},g.events.death={type:"http://gedcomx.org/Death"},a.data.search.deathDate&&(a.data.search.deathDate.normalized?(f.value+=a.data.search.deathDate.normalized,g.events.death.$date=a.data.search.deathDate.normalized):(f.value+=a.data.search.deathDate,g.events.death.$date=a.data.search.deathDate)),a.data.search.deathPlace&&(a.data.search.deathDate&&(f.value+="<br />"),f.value+=a.data.search.deathPlace,g.events.death.$place=a.data.search.deathPlace),a.toCreate.push(f)):a.data.search.status&&a.toCreate.push({title:"Death",value:'<span class="text-muted">'+a.data.search.status+"</span>"}),c.goBack=function(){b.path("/fs-addperson")},c.goNext=function(){angular.equals({},g)||(a.toCreate=g),b.path("/fs-create")}}]),angular.module("recordseekApp").controller("FsAttachCtrl",["$rootScope","$location","$scope","fsAPI",function(a,b,c,d){a.service="FamilySearch",d.displayUser(c),a.data.attach||a.debug||(a.data.search?b.path("/fs-results"):b.path("/fs-search")),a.data.attach.justification||(a.data.attach.justification=""),c.myPopover={isOpen:!1,templateUrl:"tagTemplate.html",toggle:function(){1!=c.myPopover.isOpen?c.myPopover.isOpen=!1:c.myPopover.isOpen=!0},close:function(){c.myPopover.isOpen=!1}},c.goBack=function(){a.log(a.data),a.data.search.pid&&""!=a.data.search.pid?b.path("/fs-search"):b.path("/fs-results")},c.goNext=function(){b.path("/fs-create")}}]),angular.module("recordseekApp").controller("FsCompleteCtrl",["fsAPI","$rootScope","$scope","$location","$cookies","fsUtils",function(a,b,c,d,e,f){b.service="FamilySearch",e.remove("recordseek-auth"),c.fsRedirect=function(a){return f.redirectURL(a)},c.goSearch=function(){b.setCookie("recordseek-auth",angular.toJson(b.data)),d.path("/fs-search")}}]),angular.module("recordseekApp").provider("fsAPI",["_",function(a){"http://recordseek.com"===document.location.origin||"https://recordseek.com"===document.location.origin?this.environment="production":this.environment="beta","sandbox"===this.environment?this.client_id="a0T3000000ByxnUEAR":this.client_id="S1M9-QH77-ZGJK-2HB1-MYZZ-6YN9-SBNQ-6YPS",this.redirect_uri=document.location.origin,"http://localhost:9000"!==document.location.origin&&"http://localhost:9001"!==document.location.origin&&(this.redirect_uri+="/share/"),this.logout=function(){alert("Logout")},this.$get=["$window","$http","$q","$timeout","$rootScope","$injector","$location",function(a,b,c,d,e,f,g){if(this.client_id&&this.environment&&this.redirect_uri&&(this.getEnvironment=function(){return this.environment},b.defaults.useXDomain=!0,delete b.defaults.headers.common["X-Requested-With"],this.client=new FamilySearch({client_id:this.client_id,environment:this.environment,redirect_uri:this.redirect_uri,http_function:b,deferred_function:c.defer,save_access_token:!0,auto_expire:!0,timeout_function:d,expire_callback:function(a){var b=a.helpers.decodeQueryString(document.URL);if(!b||b&&!b.code&&!b.state){var c=a.helpers.removeQueryString(document.URL);e.data.sourceDescription&&""!=e.data.sourceDescription.id&&(e.personData.sourceDescription={id:e.data.sourceDescription.id}),e.setCookie("recordseek-auth",angular.toJson(e.data)),c=a.helpers.appendQueryParameters(c,{r:1,_:e.data._}),e.log(c),h=a.getOAuth2AuthorizeURL(c),window.location=h}}}),this.client.displayUser=function(a){e.user?a.user=e.user:this.getCurrentUser().then(function(a){return a.getUser()}).then(function(b){e.user=b.data,a.user=e.user,e.log(a.user),a.$apply()})["catch"](function(a){return e.log(a),!1}),e.sourcebox||(a.getSourceBoxes=!0,e.data.sourcebox="",a.sourcebox={"Home (Unorganized)":"",RecordSeek:"CREATE"},this.getCollectionsForUser().then(function(b){var c=b.getCollections(),d={};angular.forEach(c,function(a){""!=a.getTitle()&&(d[a.getTitle()]=a.getCollectionUrl())},d),d.RecordSeek||(d.RecordSeek="CREATE");var f={"Home (Unorganized)":""};Object.keys(d).sort().forEach(function(a){f[a]=d[a]}),e.sourcebox=f,e.log(e.sourcebox),a.sourcebox=e.sourcebox,a.getSourceBoxes=!1}))},this.client.completeLogout=function(){this.helpers.eraseAccessToken(!0),delete e.user,g.path("/")},this.client.user=function(){return this.getCurrentUser().then(function(a){return a.getUser()}).then(function(a){return e.log(a.data),a.data})["catch"](function(a){return e.log(a),!1}),this.user_data},e.sourceBoxURL=this.client.settings.apiServer[this.client.settings.environment]+"/links-pages/sourceBox",e.treeViewURL=this.client.settings.apiServer[this.client.settings.environment]+"/tree/#view=tree",e.fsURL=this.client.settings.apiServer[this.client.settings.environment],e.fsAccessToken=this.client.settings.accessToken,this.urlParams=this.client.helpers.decodeQueryString(document.URL),this.urlParams.code&&this.urlParams.state)){e.status="Authenticating, please wait.",g.path("/loading");var h=this.urlParams.state.split("#");h=h[0]+="#/fs-source",this.client.getAccessToken(this.urlParams.code).then(function(){window.location=h})}return this.client}]}]),angular.module("ErrorCatcher",[]).factory("errorHttpInterceptor",["$q",function(a){return{responseError:function(b){return Raven.captureException(new Error("HTTP response error"),{extra:{config:b.config,status:b.status}}),a.reject(b)}}}]).config(["$httpProvider",function(a){a.interceptors.push("errorHttpInterceptor")}]),angular.module("recordseekApp").controller("ASourceCtrl",["$rootScope","$location","$scope","$window","$cookies",function(a,b,c,d,e){a.service="Ancestry",c.goNext=function(){a.debug&&e.remove("recordseek");var b="https://www.ancestry.com/savetoancestry/?postData=",c={citation:{title:a.data.citation,url:a.data.url},source:{title:a.data.title,publisherName:a.data.domain},repositoryDomain:a.data.domain,media:{url:"https://recordseek.com/assets/images/ancestry.jpg",note:a.data.notes}};b+=encodeURIComponent(JSON.stringify(c)),a.track({eventCategory:"Ancestry",eventAction:"Source",eventLabel:b}),d.location.href=b},c.goBack=function(){a.service="",e.remove("recordseek-last-service"),b.path("/")}}]),angular.module("recordseekApp").controller("FsResultsCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){a.service="FamilySearch",c.currentPage=1,c.bigTotalItems=0,c.index=1,c.maxSize=0,c.numPages=1,d.displayUser(c),c.goBack=function(){a.track({eventCategory:"FamilySearch",eventAction:"Search",eventLabel:"Refine"}),b.path("/fs-search")},c.addPerson=function(){angular.equals({},a.personData)?b.path("/fs-addperson"):b.path("/fs-addattach")},c.createNow=function(){a.track({eventCategory:"FamilySearch",eventAction:"Create",eventLabel:"Now"}),delete a.data.attach,a.data.complete="noAttachment",b.path("/fs-create")},c.goNext=function(c,d,e){a.data.attach={pid:c,name:d,url:e,justification:""},a.track({eventCategory:"FamilySearch",eventAction:"Selected",eventLabel:c}),b.path("/fs-attach"),a.safeApply()},c.pageChanged=function(){c.currentPage>=26&&(c.bigTotalItems=390,c.currentPage=26,c.index=26),delete c.searchResults,c.getResults()},c.getResults=function(){var f=angular.copy(a.data.search);f.eventDate="";var g=["givenName","surname","spouseGivenName","spouseSurname","fatherGivenName","fatherSurname","motherGivenName","motherSurname","eventPlace"];angular.forEach(g,function(a){f.advanced===!0?f[a]+=f[a+"Exact"]!==!0&&""!==f[a]?"~":"":f[a]+=""!==f[a]?"~":""}),f.eventType&&(f.eventDateFrom&&""!==f.eventDateFrom?(f.eventDate+=f.eventDateFrom,f.eventDateTo&&""!==f.eventDateTo&&f.eventDateFrom!==f.eventDateTo&&(f.eventDate+="-"+f.eventDateTo)):f.eventDateTo&&""!==f.eventDateTo&&(f.eventDate=f.eventDateTo),f[f.eventType+"Place"]=f.eventPlace,f[f.eventType+"Date"]=String(f.eventDate)+"~",g.push(f.eventType+"Place"),g.push(f.eventType+"Date"));var h={};if(angular.forEach(g,function(a){-1!==g.indexOf(a)&&""!=f[a]&&(this[a]=f[a])},h),0!==Object.keys(h).length||a.debug||b.path("/fs-search"),c.context&&(h.context=c.context),c.min=15*c.currentPage-14,c.max=15*c.currentPage,c.min<1&&(c.min=1),c.bigTotalItems&&c.max>c.bigTotalItems&&(c.max=c.bigTotalItems),c.maxSize=5,a.data.search.pid&&""!==a.data.search.pid){var i=a.data.search.pid;d.getPersonWithRelationships(i,{persons:!0}).then(function(b){c.searchResults=[];var d=b.getPrimaryPerson();if(d){c.bigTotalItems=c.max=1;var f=e.getPrimaryPerson(d);f.confidence=5;try{f.father=e.getRelativeData(b.getFathers())}catch(g){a.log(g)}try{f.mother=e.getRelativeData(b.getMothers())}catch(g){a.log(g)}try{f.spouse=e.getRelativeData(b.getSpouses())}catch(g){a.log(g)}try{f.children=e.getRelativeData(b.getChildren())}catch(g){a.log(g)}c.searchResults.push(f),c.goNext(f.pid,f.name,f.url)}})["catch"](function(b){a.log("Error"),c.searchResults=[],a.safeApply()})}else{if(a.log("Non-PID Search"),c.searchContent)var h={start:15*(c.currentPage-1),context:c.searchContent};a.log(h),d.getPersonSearch(h).then(function(b){c.searchResults=[],c.searchContent=b.getContext();var d=b.getSearchResults();if(0===d.length)return a.log("EMPTY"),void a.safeApply();if(c.bigTotalItems=b.getResultsCount(),c.currentPage>=26&&(c.bigTotalItems=390),c.max>c.bigTotalItems&&(c.max=c.bigTotalItems),a.log("Record length: "+d.length),0==d.length)c.searchResults.push(j),a.safeApply();else{for(var f=0,g=d.length;g>f;f++){var h=d[f],i=h.getPrimaryPerson(),j=e.getPrimaryPerson(i);j.confidence=d[f].confidence,j.father=e.getRelativeData(h.getFathers()),j.mother=e.getRelativeData(h.getMothers()),j.spouse=e.getRelativeData(h.getSpouses()),j.children=e.getRelativeData(h.getChildren()),c.searchResults.push(j),a.safeApply()}a.log(c.searchResults)}a.track({eventCategory:"FamilySearch",eventAction:"Search",eventLabel:"Results",eventValue:d.length})})["catch"](function(b){a.log(b),a.log("there"),c.searchResults=[],a.safeApply()})}},c.getResults()}]),angular.module("recordseekApp").directive("resize",["$window",function(a){return function(b){var c=angular.element(a);b.$watch(function(){return{h:c.height(),w:c.width()}},function(a){b.windowHeight=a.h,b.windowWidth=a.w,b.style=function(){return{height:a.h-100+"px",width:a.w-100+"px"}}},!0),c.bind("resize",function(){b.$apply()})};
}]),angular.module("recordseekApp").controller("FsCreateCtrl",["fsAPI","$rootScope","$scope","$location","fsUtils",function(a,b,c,d,e){function f(){c.status="Creating Person Profile for "+b.data.search.givenName1+" "+b.data.search.surname1,b.safeApply();var d=a.createPerson();b.toCreate.names&&angular.forEach(b.toCreate.names,function(a,b){d.$addName(a)}),b.toCreate.events&&angular.forEach(b.toCreate.events,function(a,b){d.$addFact(a)}),b.toCreate.gender&&d.$setGender(b.toCreate.gender),d.$save(b.attachMsg,!0).then(function(a){b.data.attach||(b.data.attach={}),b.data.attach.pid=a,b.data.attach.name=d.$getDisplayName(),b.data.attach.url=d.identifiers["http://gedcomx.org/Persistent"][0],delete b.toCreate,i()})}function g(){!b.data.sourceDescription&&b.data.url?(c.status="Generating Source",b.log(e.removeEmptyProperties({about:b.data.url.trim()?b.data.url.trim():"",citation:b.data.citation.trim()?b.data.citation.trim():"",title:b.data.title.trim()?b.data.title.trim():"",text:b.data.notes.trim()?b.data.notes.trim():""})),b.data.sourceDescription=a.createSourceDescription(e.removeEmptyProperties({about:b.data.url.trim()?b.data.url.trim():"",citation:b.data.citation.trim()?b.data.citation.trim():"",title:b.data.title.trim()?b.data.title.trim():"",text:b.data.notes.trim()?b.data.notes.trim():""})),b.data.sourceDescription.save(b.attachMsg).then(function(a){b.track({eventCategory:"FamilySearch",eventAction:"Source Created",eventLabel:b.data.sourceDescription.getId()}),h()})):(b.track({eventCategory:"FamilySearch",eventAction:"Source Attached to Another"}),h())}function h(){return""==b.data.sourcebox?void i():(c.status="Moving Source to Collection",b.safeApply(),void("CREATE"==b.data.sourcebox?(b.data.sourceboxfolder=a.createCollection({title:"RecordSeek"}),b.data.sourceboxfolder.save("Created by http://recordseek.com/").then(function(c){b.data.sourcebox=b.sourcebox.RecordSeek=b.data.sourceboxfolder.getCollectionUrl(),a.moveSourceDescriptionsToCollection(b.data.sourcebox+"/descriptions",[b.data.sourceDescription.getId()]).then(function(a){i()})})):a.moveSourceDescriptionsToCollection(b.data.sourcebox+"/descriptions",[b.data.sourceDescription.getId()]).then(function(a){i()})))}function i(){if(!b.data.attach)return d.path("/fs-complete"),b.safeApply();if(b.toCreate)return void f();if(b.data.sourceDescription&&"noAttachment"==b.data.complete)return delete b.data.attach,d.path("/fs-complete"),b.safeApply();delete b.data.complete,b.data.attach.name=b.data.attach.name?b.data.attach.name:"this Profile",c.status="Attaching Source to "+b.data.attach.name,b.safeApply();var e=a.createSourceRef({attribution:{changeMessage:"Created by http://RecordSeek.com"}}).setSourceDescription(b.data.sourceDescription).setAttachedEntityId(b.data.attach.pid),g=[];return angular.forEach(b.data.tags,function(a,b){a===!0&&this.push("http://gedcomx.org/"+b.charAt(0).toUpperCase()+b.slice(1))},g),e.setTags(g),void a.getPerson(b.data.attach.pid).then(function(a){var c=a.getPerson();e.save(c.data.links.person.href,b.data.attach.justification).then(function(a){var c=e.data.links["source-reference"].href.split("?")[0].split("/");c=c[c.length-1],b.track({eventCategory:"FamilySearch",eventAction:"Source Attached",eventLabel:c}),b.data.complete=b.data.attach,b.data.complete.sourceRef=c,delete b.data.attach,d.path("/fs-complete"),b.safeApply()})})}b.service="FamilySearch",b.data.attach||"noAttachment"==b.data.complete||d.path("/fs-search"),a.displayUser(c),g()}]),angular.module("recordseekApp").factory("fsUtils",["_","$q","fsAPI","$rootScope",function(a,b,c,d){return{removeEmptyProperties:function(b){return a.omit(b,function(b){return a.isEmpty(b)&&0!==b})},getPrimaryPerson:function(a){return{pid:a.getId(),name:a.getDisplayName(),birthDate:a.getBirthDate(),gender:a.getDisplayGender(),url:this.redirectURL(a.getPersistentIdentifier()),birthPlace:a.getBirthPlace(),deathDate:a.getDeathDate(),deathPlace:a.getDeathPlace()}},redirectURL:function(a){return d.fsURL+"/platform/redirect?uri="+encodeURIComponent(a)+"&access_token="+d.fsAccessToken},getLocation:function(a){return c.getPlacesSearch({name:a,count:10}).then(function(a){for(var b=[],c=a.getSearchResults(),d=0;d<c.length;d++){var e=c[d].getPlace();b.push(e.getFullName())}return b})},getDate:function(a){return c.getDate(a).then(function(a){var b=a.getDate();return b.normalized?-1!=b.normalized.indexOf("/")?(b.normalized=b.normalized.split("/"),b.normalized):[b.normalized]:void 0})},getRelativeData:function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c].living||b.push({pid:a[c].getId(),url:this.redirectURL(a[c].getPersistentIdentifier()),name:a[c].getDisplayName(),gender:a[c].getDisplayGender(),data:a[c]});return b},getCurrentUser:function(){c.getCurrentUser().then(function(a){return a.getUser()})},setService:function(){return"FamilySearch"},langTemplates:function(){var a=["Standard","Spanish","Portuguese","Cyrillic","Chinese","Japanese","Khmer","Korean","Mongolian","Thai","Vietnamese"];return a},langTemplatesExpanded:function(){var a=this.langTemplates();return"Cyrillic"==$template?($scope.title1="Cyrillic",$scope.title2="Roman"):"Chinese"==$template?($scope.title1="Hanzi",$scope.title2="Roman"):"Japanese"==$template?($scope.title1="Kanji",$scope.title2="Kana",$scope.title3="Roman"):"Khmer"==$template?($scope.title1="Khmer",$scope.title2="Roman"):"Korean"==$template?($scope.title1="Hangul",$scope.title2="Hanja",$scope.title3="Roman"):"Mongolian"==$template?($scope.title1="Mongolian",$scope.title2="Roman"):"Thai"==$template?($scope.title1="Thai",$scope.title2="Roman"):"Vietnamese"==$template&&($scope.title1="Vietnamese",$scope.title2="Roman"),a},cleanSearch:function(a){return a.givenName&&!a.givenName1&&(a.givenName1=a.givenName),a.surname&&!a.surname1&&(a.surname1=a.surname),"birth"!=a.eventType||a.birthDate||a.birthPlace||(a.birthPlace||(a.birthPlace=a.eventPlace),a.birthDate||!a.eventDateFrom&&!a.eventDateTo||(a.eventDateFrom&&a.eventDateTo?a.eventDateFrom==a.eventDateTo?a.birthDate=a.eventDateFrom:a.birthDate=a.eventDateFrom+"-"+a.eventDateTo:a.eventDateFrom?a.birthDate=a.eventDateFrom:a.eventDateTo&&(a.birthDate=a.eventDateTo))),"death"!=a.eventType||a.deathDate||a.deathPlace||(a.deathPlace||(a.deathPlace=a.eventPlace),a.deathDate||!a.eventDateFrom&&!a.eventDateTo||(a.eventDateFrom&&a.eventDateTo?a.eventDateFrom==a.eventDateTo?a.deathDate=a.eventDateFrom:a.deathDate=a.eventDateFrom+"-"+a.eventDateTo:a.eventDateFrom?a.deathDate=a.eventDateFrom:a.eventDateTo&&(a.deathDate=a.eventDateTo)),(a.deathPlace||a.deathDate)&&(a.status="Deceased")),"burial"==a.eventType&&(a.eventPlace||a.eventDateFrom||a.eventDateTo)&&(a.status="Deceased"),a.langTemplate||(a.langTemplate="Standard"),a.gender||(a.gender="Unknown"),a}}}]),angular.module("recordseekApp").run(["$templateCache",function(a){a.put("views/a-source.html",'<h3>Attach a Source <small> to Ancestry.com</small> </h3> <div class="row container-fluid"> <form ng-submit="goNext()"> <div class="form-group input-group-sm"> <label>Source Title </label> <input type="text" class="form-control" ng-model="data.title" placeholder="Enter a title for this source" required> </div> <div class="form-group input-group-sm"> <label>Source <small>(URL)</small> </label> <input type="text" class="form-control" ng-model="data.url" placeholder="Enter a URL" required> </div> <div class="form-group input-group-sm"> <label>Where the Record Is Found <small>(Citation)</small> </label> <textarea class="form-control" ng-model="data.citation" rows="3" required></textarea> </div> <div class="form-group input-group-sm" show-errors> <label>Describe the Record <small>(Notes)</small> </label> <textarea class="form-control" ng-model="data.notes" rows="3"></textarea> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> &nbsp;&nbsp; <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> </div> </form> </div>'),a.put("views/about.html",'<h1>RecordSeek <small>- Sources Done Right</small> </h1> <div style="font-size: 1.2em"><p>Back in 2013 I was a CTO of Real-Time Collaboration, makers of FamilyInsight, AncestorSync, and SharingTime. I found a real need, with the new FamilySearch website, to make the process of adding sources much more simplified. I sat down and in a few weeks RecordSeek was created.</p> <p>For a time we used the name of TreeConnect, but TreeConnect was only ever a "product" of RecordSeek. To avoid confusion, we\'re going back to RecordSeek as the original name.</p> <p>We\'ve had some rough ups and downs, but now RecordSeek has been completely rewritten and is ready for the future!</p> <p>If you would like to integrate RecordSeek into your website, we\'re more than willing. We\'d just request you donate to the effort. You are welcome to contact me directly at <a href="mailto:me@dovy.io?subject=RecordSeek">me@dovy.io</a>.</p> <p>My hope is that RecordSeek makes your genealogy efforts easier. Your ancestors thank you for your efforts.</p> <blockquote>Dovy Paukstys<br> <small>Creator & Owner</small> </blockquote> </div>'),a.put("views/fs-addattach.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Create a New Person & Attach Source <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events <span class="badge">{{tagCount}}</span></a> <br> <small>Source: "{{data.title}}"</small> </h3> <div class="bs-callout bs-callout-info" id="callout-helper-context-color-specificity"> <a href class="btn btn-default btn-xs pull-right" ng-click="goBack()">Modify Person Data</a> <h4>Person to be Created</h4> <div class="row"> <div class="col-sm-4 col-xs-6" ng-repeat="item in toCreate"><strong ng-hide="!item.title">{{item.title}} <small class="ng-hide" ng-show="item.sub"> ({{item.sub}})</small> :</strong> <span ng-bind-html="item.value"></span></div> </div> </div> <div class="row"> <form class="col-xs-12" ng-submit="goNext()"> <div class="form-group" show-errors> <label>Reason to Attach this Source to this Person <small>(Optional)</small> </label> <textarea class="form-control" ng-model="data.attach.justification" rows="3">{{data.attach.justification}}</textarea> <span id="helpBlock" class="help-block">This will be useful for other patrons who see your source, and want to know why you attached this source.</span> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> &nbsp;&nbsp; <button type="submit" class="btn btn-primary">Create<span class="hidden-xs"> & Attach</span></button> </div> </form> </div>'),a.put("views/fs-addperson.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Create a New Person</h3> <form class="addPerson" ng-init="isDisabled = false" ng-submit="goNext()"> <div class="row hide"> <div class="col-xs-12 form-group"> <div class="btn-group" dropdown is-open="status.isopen"> <span class="btn-text btn-xs text-muted">Name Template:</span> <button type="button" class="btn btn-info btn-xs dropdown-toggle" dropdown-toggle ng-disabled="disabled"> {{data.search.langTemplate}}&nbsp;&nbsp;<span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"> <li ng-repeat="value in langTemplates"> <a ng-click="changeTemplate(value)" href>{{value}}</a> </li> </ul> </div> </div> </div> <div class="row row1"> <div class="col-xs-1 rowTitle ng-hide" ng-class="(data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\') ? \'col-xs-2 rowTitle\' : \'col-xs-2 col-sm-1 rowTitle\'" ng-show="data.search.langTemplate == \'Chinese\' || data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Cyrillic\' ||  data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Korean\' ||  data.search.langTemplate == \'Mongolian\' ||  data.search.langTemplate == \'Thai\' ||  data.search.langTemplate == \'Vietnamese\'"> <div class="form-group text-muted"> {{prefix1}} </div> </div> <div ng-class="(data.search.langTemplate == \'Standard\' || data.search.langTemplate == \'Spanish\' || data.search.langTemplate == \'Portuguese\') ? \'col-sm-2 col-xs-4\' : \'col-sm-1 col-xs-5\'" ng-hide="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="form-group"> <label>Title</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.prefix1" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6 ng-hide" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-show="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname1" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="data.search.langTemplate==\'Thai\' ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'"> <div class="form-group"> <label>Given Name(s)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName1" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-hide="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname1" class="form-control"> </div> </div> </div> <div class="col-sm-2 col-xs-6" ng-hide="data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Thai\'"> <div class="form-group"> <label>Suffix</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.suffix1" class="form-control"> </div> </div> </div> </div> <div class="row row2 ng-hide" ng-show="data.search.langTemplate != \'Standard\' && data.search.langTemplate != \'Spanish\' && data.search.langTemplate != \'Portuguese\'"> <div class="col-xs-1 rowTitle ng-hide" ng-class="(data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\') ? \'col-xs-2 rowTitle\' : \'col-xs-1 rowTitle\'" ng-show="data.search.langTemplate == \'Chinese\' || data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Cyrillic\' ||  data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Korean\' ||  data.search.langTemplate == \'Mongolian\' ||  data.search.langTemplate == \'Thai\' ||  data.search.langTemplate == \'Vietnamese\'"> <div class="form-group text-muted"> {{prefix2}} </div> </div> <div ng-class="(data.search.langTemplate == \'Standard\' || data.search.langTemplate == \'Spanish\' || data.search.langTemplate == \'Portuguese\') ? \'col-sm-2 col-xs-6\' : \'col-sm-1 col-xs-6\'" ng-hide="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="form-group"> <label>Title</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.prefix2" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6 ng-hide" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-show="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname2" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="data.search.langTemplate==\'Thai\' ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'"> <div class="form-group"> <label>Given Name(s)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName2" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-hide="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname2" class="form-control"> </div> </div> </div> <div class="col-sm-2 col-xs-6" ng-hide="data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Thai\'"> <div class="form-group"> <label>Suffix</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.suffix2" class="form-control"> </div> </div> </div> </div> <div class="row row3 ng-hide" ng-show="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="col-xs-1 rowTitle ng-hide" ng-class="(data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\') ? \'col-xs-2 rowTitle\' : \'col-xs-1 rowTitle\'" ng-show="data.search.langTemplate == \'Chinese\' || data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Cyrillic\' ||  data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Korean\' ||  data.search.langTemplate == \'Mongolian\' ||  data.search.langTemplate == \'Thai\' ||  data.search.langTemplate == \'Vietnamese\'"> <div class="form-group text-muted"> {{prefix3}} </div> </div> <div ng-class="(data.search.langTemplate == \'Standard\' || data.search.langTemplate == \'Spanish\' || data.search.langTemplate == \'Portuguese\') ? \'col-sm-2 col-xs-6\' : \'col-sm-1 col-xs-6\'" ng-hide="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="form-group"> <label>Title</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.prefix3" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6 ng-hide" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-show="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname3" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="data.search.langTemplate==\'Thai\' ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'"> <div class="form-group"> <label>Given Name(s)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName3" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-hide="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname3" class="form-control"> </div> </div> </div> <div class="col-sm-2 col-xs-6" ng-hide="data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Thai\'"> <div class="form-group"> <label>Suffix</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.suffix3" class="form-control"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group input-group-sm"> <label>Gender </label> <select class="form-control" ng-disabled="data.search.pid" ng-model="data.search.gender"> <option value="Male">Male</option> <option value="Female">Female</option> <option value="Unknown" selected>Unknown</option> </select> </div> </div> <div class="col-xs-6"> <div class="form-group input-group-sm"> <div class="radio"> <label> <input type="radio" name="status" ng-model="data.search.status" value="Living" required> Living </label> </div> <div class="radio"> <label> <input type="radio" name="status" ng-model="data.search.status" value="Deceased" required> Deceased </label> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group input-group-sm"> <label>Date of Birth</label><br> <input type="text" class="form-control birthDate" placeholder="" ng-disabled="data.search.pid" ng-model="data.search.birthDate" typeahead-wait-ms="650" typeahead="date for date in getDate($viewValue)" typeahead-template-url2="dateResponseTemplate.html" typeahead-input-formatter2="$model.normalized"> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Birthplace </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.birthPlace" typeahead-wait-ms="650" typeahead="address for address in getLocation($viewValue)" class="form-control"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group input-group-sm"> <label>Date of Death</label><br> <input type="text" class="form-control deathDate" placeholder="" ng-disabled="data.search.pid || data.search.status == \'Living\'" ng-model="data.search.deathDate" typeahead-wait-ms="650" typeahead="date for date in getDate($viewValue)" typeahead-template-url2="dateResponseTemplate.html" typeahead-input-formatter2="$model.normalized"> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Place of Death </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid || data.search.status == \'Living\'" ng-model="data.search.deathPlace" typeahead-wait-ms="650" typeahead="address for address in getLocation($viewValue)" class="form-control"> </div> </div> </div> </div> <div class="row hide"> <div class="col-xs-12"> <div class="form-group"> <a class="btn btn-default btn-xs" ng-click="isCollapsed = !isCollapsed"> <i ng-class="!isCollapsed ? \'glyphicon glyphicon-chevron-down\' : \'glyphicon glyphicon-chevron-up\'" class="glyphicon glyphicon-chevron-down"></i> Additional Relationships </a> </div> </div> </div> <div class="hide" collapse="!isCollapsed"> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <label>Mother\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherGivenName"> </div> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Mother\'s Surname </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherSurname"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <label>Father\'s Given<span class="hidden-xs"> Name(s)</span></label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherGivenName"> </div> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Father\'s Surname </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherSurname"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <label>Spouse\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseGivenName"> </div> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Spouse\'s Surname </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseSurname"> </div> </div> </div> </div> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> <span class="hidden-xs"><a class="btn btn-link" ng-click="advancedSearch()">{{advancedButtonText}}</a> &nbsp;&nbsp;</span> <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> </div> </form> <script type="text/ng-template" id="dateResponseTemplate.html"><a data-formal="{{match.model.formal}}">\n        <span bind-html-unsafe="match.model.normalized | typeaheadHighlight:query">{{match.model.normalized}}</span>\n    </a></script>'),a.put("views/fs-attach.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Attach Source to <a href="{{data.attach.url}}" target="_blank" popover-placement="top" popover="View on FamilySearch" popover-trigger="mouseenter">{{data.attach.name}}</a> <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events <span class="badge">{{tagCount}}</span></a> <br> <small>Source: "{{data.title}}"</small> </h3> <form ng-submit="goNext()"> <div class="form-group" show-errors> <label>Reason to Attach this Source to this Person <small>(Optional)</small> </label> <textarea class="form-control" ng-model="data.attach.justification" rows="5">{{data.attach.justification}}</textarea> <span id="helpBlock" class="help-block">This will be useful for other patrons who see your source, and want to know why you attached it.<br><br>A few examples: <br><ul> <li>"This is one of my Grandparents and I know it applies."</li> <li>"I\'m not sure if this is correct, more research is needed."</li> </ul></span> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> &nbsp;&nbsp; <button type="submit" class="btn btn-primary">Create<span class="hidden-xs"> & Attach</span></button> </div> <select ng-repeat="source in sourceBox"> <option value="RecordSeek">RecordSeek</option> </select> </form>'),a.put("views/fs-complete.html",'<div class="ng-hide" ng-show="data.complete && data.complete == \'noAttachment\'"> <h3>Congratulations! A source has been created and added to your <span class="text-info">source box</span>.<br> <small>"{{data.title}}"</small> </h3> <p>The FamilySearch <span class="text-info">source box</span> lets you preserve the record sources that you find for later use. Once a source is in your <span class="text-info">source box</span>, you can easily find it again without having to search for it. You can also easily attach the sources in your <span class="text-info">source box</span> to your ancestors in FamilySearch Family Tree.</p> <div class="text-center"> <br><a href="{{fsRedirect($parent.sourceBoxURL)}}" class="btn btn-info" target="_blank">View source box on FamilySearch</a><br><br> <a href="{{fsRedirect($parent.treeViewURL)}}" target="_blank" class="btn btn-warning">Add new records to your Family Tree</a><br><br> </div> </div> <div class="ng-hide" ng-show="data.complete && data.complete != \'noAttachment\'"> <h3>Congratulations! A new source has been created and added to <a href="{{data.complete.url}}" target="_blank" popover-placement="top" popover="View on FamilySearch" popover-trigger="mouseenter">{{data.complete.name}}</a>.<br> <small>"{{data.title}}"</small> </h3> <div class="row ng-hide" ng-show="data.complete"> <div class="text-center"> <br><span class="ng-hide" ng-hide="!data.complete"><a href="{{data.complete.url}}" class="btn btn-info" target="_blank">View Profile on FamilySearch</a><br><br></span> <span class="ng-hide" ng-hide="data.complete"><a href="{{fsRedirect($parent.sourceBoxURL)}}" class="btn btn-info" target="_blank">View SourceBox on FamilySearch</a><br><br></span> <a ng-click="goSearch()" class="btn btn-warning">Attach to <span class="ng-hide" ng-hide="data.complete">a</span><span class="ng-hide" ng-hide="!data.complete">Another</span> Person</a><br><br> </div> </div> <div class="bs-callout bs-callout-info ng-hide" ng-show="data.search.newPerson"> <h4>A New Profile was Created, Now What?</h4> <p>So there\'s a new person in the FamilyTree, but no one likes to be alone! Did you know that this ancestor has NO relatives attached? Please head over to FamilySearch and find their relatives, parents, or anyone you can to connect them to the Family Tree.</p> <center> <button type="button" class="btn btn-success"> <i class="glyphicon glyphicon-tree-deciduous"></i>&nbsp;&nbsp;Tree View </button> <button type="button" class="btn btn-info"><i class="glyphicon glyphicon-user"></i>&nbsp;&nbsp;Profile View </button> </center> </div> </div> <div class="ng-hide" ng-show="!data.complete"> <h3>There seems to have been an error in the creation process.<br> <small>Please try again later.</small> </h3> </div> <br><br><br><p class="text-muted text-center">You may now close this window.</p>'),
a.put("views/fs-create.html",'<center> <div class="la-square-jelly-box la-2x la-dark"> <div></div> <div></div> </div> </center> <h3 class="text-center">{{status}}</h3>'),a.put("views/fs-results.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Are any of these people the <strong>{{data.search.givenName}} {{data.search.surname}}</strong> youre looking for? </h3> <h5 class="hide">If yes, click <mark class="info">select</mark> . If not, <a ng-click="addPerson()">add a new person</a></h5> <div class="row container-fluid" resize> <form class="results"> <table class="table table-striped table-hover table-condensed table-responsive header-fixed"> <thead> <tr> <th class="select">&nbsp;</th> <th class="person">Person</th> <th class="events">Events</th> <th class="parents">Parents</th> <th class="spouse">Spouse(s)</th> </tr> </thead> <tbody style="max-height: {{windowHeight - 305}}px"> <tr class="active rowNotice" class="ng-hide" ng-show="bigTotalItems"> <td colspan="5"><span class="pull-right">{{min}}-{{max}} of {{bigTotalItems}} results</span>  </td></tr> <tr class="loading" ng-hide="searchResults"> <td colspan="5"><i class="glyphicon glyphicon-time"></i></td> </tr> <tr class="loading ng-hide" ng-hide="!searchResults || searchResults.length > 0"> <td colspan="5">No Results Found</td> </tr> <tr ng-repeat="result in searchResults" class="ng-hide" ng-show="searchResults"> <td class="select vert-align"> <a class="btn btn-xs btn-success" ng-click="goNext(result.pid, result.name, result.url)">Select</a><br><span class="confidence" popover-placement="right" popover="How well this matches your search." popover-trigger="mouseenter"><i class="glyphicon glyphicon-{{result.confidence >= 1 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 2 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 3 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 4 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 5 ? \'star\' : \'star-empty\'}}"></i></span><i></i> </td> <td class="person"><i class="glyphicon glyphicon-stop {{result.gender}}"></i><a href="{{result.url}}" popover-placement="right" popover="View on FamilySearch" popover-trigger="mouseenter" target="_blank">{{result.name}}</a><br> <small>{{result.pid}}</small> </td> <td class="events"> <div class="birth ng-hide" ng-show="result.birthDate || result.birthPlace"><span class="eLabel" popover-placement="top" popover="Birth" popover-trigger="mouseenter">b.</span> {{result.birthDate}} <i class="glyphicon glyphicon-map-marker ng-hide" ng-show="result.birthPlace && result.birthDate" popover-trigger="mouseenter" popover-placement="top" popover="{{result.birthPlace}}"></i> <span class="ng-hide" ng-show="result.birthPlace && !result.birthDate" popover-trigger="mouseenter" popover-placement="top" popover="{{result.birthPlace}}">{{result.birthPlace}}</span> </div> <div class="death ng-hide" ng-show="result.deathDate || result.deathPlace"><span popover-placement="bottom" popover="Death" popover-trigger="mouseenter" class="eLabel">d.</span> {{result.deathDate}} <i class="glyphicon glyphicon-map-marker ng-hide" ng-show="result.deathPlace && result.deathDate" popover-trigger="mouseenter" popover-placement="bottom" popover="{{result.deathPlace}}"></i> <span class="ng-hide" ng-show="result.deathPlace && !result.deathDate" popover-trigger="mouseenter" popover-placement="bottom" popover="{{result.deathPlace}}">{{result.deathPlace}}</span> </div> </td> <td class="parents"><span ng-repeat="father in result.father"><i class="glyphicon glyphicon-stop {{father.gender}}"></i><a href="{{father.url}}" target="_blank">{{father.name}}</a></span> <span ng-repeat="mother in result.mother"><i class="glyphicon glyphicon-stop {{mother.gender}}"></i><a href="{{mother.url}}" target="_blank">{{mother.name}}</a></span> </td> <td class="spouse"><span ng-repeat="spouse in result.spouse"><i class="glyphicon glyphicon-stop {{spouse.gender}}"></i><a href="{{spouse.url}}" target="_blank">{{spouse.name}}</a></span></td> </tr> </tbody> </table> <center> <!--<pagination total-items="bigTotalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" items-per-page="15" num-pages="numPages" ng-change="pageChanged()"></pagination>--> <pagination total-items="bigTotalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" items-per-page="15" boundary-links="true" rotate="false" num-pages="numPages" ng-change="pageChanged()"></pagination> </center> <div class="row container-fluid text-center result-action"> <div class="btn-toolbar"> <div class="btn-group pull-left"> <a ng-click="goBack()" class="btn btn-primary"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Modify Search</a> </div> <div class="btn-group pull-right"> <span class="btn-text text-muted hidden-xs">Person not found?</span> <a ng-click="createNow()" class="btn btn-default" popover-placement="left" popover="Save the source to your SourceBox, without attaching to a profile." popover-trigger="mouseenter">Save Now, Attach Later</a> <span class="btn-text text-muted hidden-xs hide">If found, click <mark class="success">Select</mark>.</span> <div class="hide"> <span class="btn-text text-muted hidden-xs">No luck?</span> <a ng-click="addPerson()" class="btn btn-default">Add a New Person<span class="hidden-xs">&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon glyphicon-hand-right"></i></span></a> </div> </div> </div> </div> </form> </div>'),a.put("views/fs-search.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Search for an existing person</h3> <div class="row container-fluid"> <form class="personSearch" ng-init="isDisabled = false" ng-submit="goNext()"> <div class="visible-xs"> <div class="row"> <div class="col-sm-12"> <div class="form-group input-group-sm"> <label>Search by Person ID Number </label> <input type="text" class="form-control" ng-model="data.search.pid"> </div> </div> </div> <hr> </div> <div class="row"> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Given Name(s)</label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.givenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group input-group-sm"> <label class="hidden-xs">Last Names (Surname)</label> <label class="visible-xs">Surname</label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.surnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group input-group-sm"> <label>Gender </label> <select class="form-control" ng-disabled="data.search.pid" ng-model="data.search.gender"> <option></option> <option value="Male">Male</option> <option value="Female">Female</option> <option value="Unknown">Unknown</option> </select> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group input-group-sm"> <label>Event Type </label> <select class="form-control" ng-disabled="data.search.pid" ng-model="data.search.eventType"> <option></option> <option value="birth">Birth</option> <option value="christening">Christening</option> <option value="marriage">Marriage</option> <option value="death">Death</option> <option value="burial">Burial</option> </select> </div> </div> </div> <div class="visible-xs"> <div class="row"> <div class="col-sm-3"> <div class="form-group input-group-sm"> <label>Event Year (Range) </label><br> <input type="text" class="form-control eventYearFrom" placeholder="From" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateFrom"> <input type="text" class="form-control eventYearTo" placeholder="To" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateTo"> </div> </div> <div class="col-sm-3"> <div class="form-group"> <label>Event Place </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlace" typeahead-wait-ms="450" typeahead="address for address in getLocation($viewValue)" class="form-control"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlaceExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Spouse\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseGivenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.spouseGivenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Spouse\'s Surname </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseSurname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.spouseSurnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="hidden-xs"> <div class="col-sm-3"> <div class="form-group input-group-sm"> <label>Event Year (Range) </label><br> <input type="text" class="form-control eventYearFrom" placeholder="From" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateFrom"> <input type="text" class="form-control eventYearTo" placeholder="To" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateTo"> </div> </div> <div class="col-sm-3"> <div class="form-group"> <label>Event Place </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlace" typeahead-wait-ms="450" typeahead="address for address in getLocation($viewValue)" class="form-control"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlaceExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Mother\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherGivenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.motherGivenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Mother\'s Surname </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherSurname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.motherSurnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Father\'s Given<span class="hidden-xs"> Name(s)</span></label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherGivenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.fatherGivenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Father\'s Surname </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherSurname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.fatherSurnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> </div> <div class="hidden-xs"> <hr> <div class="row"> <div class="col-xs-12"> <div class="form-group input-group-sm" ng-class="pid_state()"> <label>Search by Person ID Number </label> <input type="text" class="form-control text-center" ng-model="data.search.pid" ng-trim="false" ng-change="pid_check()" style="text-transform:uppercase"> </div> </div> </div> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Modify Source </a> <span class="hidden-xs"><a class="btn btn-link" ng-click="advancedSearch()">{{advancedButtonText}}</a> &nbsp;&nbsp;</span> <span class=""><a class="btn btn-default btn-sm" ng-click="resetSearch()">Reset</a> &nbsp;&nbsp;</span> <button type="submit" class="btn btn-primary" ng-disabled="validData()">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> <span class="visible-xs"><a class="btn btn-link" ng-click="advancedSearch()">{{advancedButtonText}}</a></span> </div> </form> </div>'),a.put("views/fs-source.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}. <a ng-click="logout()">Not {{user.givenName}}?</a></span> <h3 xmlns="http://www.w3.org/1999/html">Attach a Source <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events <span class="badge">{{tagCount}}</span></a> <br> <small class="hide">Before we add {name} to your tree, lets create a source (similar to a bookmark) for future reference.</small> <!--<a class="btn btn-info pull-right btn-sm ng-hide" ng-click="goUpload()">Upload Memory</a>--> </h3> <div class="row container-fluid"> <form ng-submit="goNext()"> <div class="form-group input-group-sm"> <label>Source Title </label> <input type="text" class="form-control" ng-model="data.title" placeholder="Enter a title for this source" required> </div> <div class="form-group input-group-sm"> <label>Source <small>(URL)</small> </label> <input type="text" class="form-control" ng-model="data.url" placeholder="Enter a URL" required> </div> <div class="form-group input-group-sm"> <label>Where the Record Is Found <small>(Citation)</small> </label> <textarea class="form-control" ng-model="data.citation" rows="3" required></textarea> </div> <div class="form-group input-group-sm" show-errors> <label>Describe the Record <small>(Notes)</small> </label> <textarea class="form-control" ng-model="data.notes" rows="3"></textarea> </div> <div ng-class="getSourceBoxes ? \'form-group input-group-sm has-warning col-xs-10a\' : \'form-group input-group-sm col-xs-10a\'" class="" title="Loading data..."><label>Source Box <small>(Folder)</small></label> <select class="form-control" ng-model="data.sourcebox" popover-placement="top" popover="If in orange, your SourceBox folders are being fetched. Please wait if you want a specific folder." popover-trigger="mouseenter"> <option ng-repeat="(key, value) in sourcebox" ng-selected="{{key == \'Home (Unorganized)\'}}" value="{{value}}">{{key}}</option> </select> </div> <!--<div ng-class="getSourceBoxes ? \'form-group input-group-sm col-xs-2\' : \'form-group input-group-sm col-xs-2\'" class="" title="">--> <!--<label>&nbsp;</label>--> <!--<label class="form-control checkbox-inline">--> <!--<input class="" type="checkbox"> Remember </label>--> <!--</div>--> <!--<br style="clear:both;" />--> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> <span class="hidden-xs"><a ng-click="createNow()" class="btn btn-xs btn-default" popover-placement="left" popover="Save the source to your SourceBox, without attaching to a profile." popover-trigger="mouseenter">Save Now, Attach Later</a><br class="visible-xs"> &nbsp;&nbsp;</span> <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> <span class="visible-xs"><br><a ng-click="createNow()" class="btn btn-xs btn-default" popover-placement="left" popover="Save the source to your SourceBox, without attaching to a profile." popover-trigger="mouseenter">Save Now, Attach Later</a></span> </div> </form> </div> <script type="text/ng-template" id="tagTemplate.html"><div style="width:240px;">\n        <div class="text-center"><strong>Select the events this source <br/>should be attached to.</strong></div>\n\n        <div style="margin: 5px 0 10px 0;">\n            <div class="row">\n                <div class="col-sm-6">\n                    <label class="checkbox-inline">\n                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.name"> Name </label>\n                </div>\n                <div class="col-sm-6">\n                    <label class="checkbox-inline">\n                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.gender"> Gender </label>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-sm-6">\n                    <label class="checkbox-inline">\n                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.birth"> Birth </label>\n                </div>\n                <div class="col-sm-6">\n                    <label class="checkbox-inline">\n                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.christening"> Christening\n                    </label>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-sm-6">\n                    <label class="checkbox-inline">\n                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.death"> Death </label>\n                </div>\n                <div class="col-sm-6">\n                    <label class="checkbox-inline">\n                        <input type="checkbox" ng-click="tagCounting()" ng-model="data.tags.burial"> Burial </label>\n                </div>\n            </div>\n\n\n        </div>\n        <a class="btn btn-info btn-xs center-block" ng-click="myPopover.close()">Close</a>\n    </div></script>'),a.put("views/fs-upload.html","<p>This is the fs-upload view.</p>"),a.put("views/loading.html",'<center> <div class="la-square-jelly-box la-2x la-dark"> <div></div> <div></div> </div> </center> <h3 class="text-center">{{status}}</h3>'),a.put("views/main.html",'<div class="alert alert-warning text-center hide" role="alert">We\'ve had login issues with FamilySearch over the past few weeks. We just pushed a release, and it should be working perfect. Please let us know if you experience any issues.</div> <div class="alert alert-info text-center hide" role="alert">We\'ve just implemented the new FamilySearch redirect endpoint. Once you authenticate with RecordSeek, you will not need to authenticate to FamilySearch again. Enjoy! :)</div> <div class="alert alert-success text-center" role="alert">Thanks to the help of our users we have identified and resolved some issues with the Ancestry URLs. Now when Ancestry URLs are posted to FamilySearch, they all work. Also URL being posted to Ancestry.com now work again. Ancestry changed their source saving mechanism and how their URLs are constructed. Let us know if there are any other problems.</div> <div class="alert alert-danger text-center hide" role="alert">We just fixed the <strong>person ID search bug</strong>, and a slew of other bugs. Everything should be working as you would expect. We also added back the option for you to choose your SourceBox folder. <br>Let us know if you find any bugs. Enjoy! :)</div> <div class="jumbotron"> <h1>Create a Source</h1> <p class="lead"> Please select a service to add your source to. </p> </div> <div class="container-fluid serviceSelect"> <div class="row"> <div class="col-xs-6 text-center"> <a data-href="/fs-source" id="loadFamilySearch" data-tracking="FamilySearch" ng-click="actionTaken( $event )"><img src="images/familysearch.0a1c0029.png" class="img-responsive img-thumbnail hidden-xs center-block" popover-placement="bottom" popover="FamilySearch.org" popover-trigger="mouseenter"><img src="images/familysearch-icon.89267332.png" class="img-responsive img-thumbnail visible-xs center-block"></a><h4 class="visible-xs text-muted" style="margin-top:10.5px">FamilySearch</h4> </div> <div class="col-xs-6 text-center"> <a data-href="/a-source" id="loadAncestry" data-tracking="Ancestry" ng-click="actionTaken( $event )"><img src="images/ancestry.83b9eadf.png" class="img-responsive img-thumbnail hidden-xs center-block" popover-placement="bottom" popover="Ancestry.com" popover-trigger="mouseenter"><img src="images/ancestry-icon.6e4456c4.png" class="img-responsive img-thumbnail visible-xs center-block"></a><h4 class="visible-xs text-muted" style="margin-top:10.5px">Ancestry</h4> </div> </div> </div>'),a.put("views/support.html",'<h1>Get Support <small>( sometimes we all just need a little help )</small></h1> <h4>Should you need anything, or have ideas, please drop me a line.</h4> <h4 class="text-center"><a href="mailto:me@dovy.io?subject=RecordSeek">me@dovy.io</a></h4>')}]);